#version 400

in vec3 Position;
in vec3 Normal;

uniform vec3 lightPosition;
uniform vec3 eyePosition;
uniform vec3 ambientLight;

const float intensity = 0.9;

const int levels = 3;
const float scaleFactor = 1.0/levels;

out vec3 fragColor;

void main()
{
	vec3 s = normalize(lightPosition - Position);
	vec3 n = normalize(Normal);
	vec3 v = normalize(eyePosition - Position);
	vec3 h = normalize((s + v)/2);

	float diffuse = floor(pow(max(dot(n, s), 0.0), 1) * levels) * scaleFactor;
	float specular = max(dot(n, h), 0.0);

	vec3 diffuseLight = vec3(diffuse, diffuse, diffuse);

	fragColor = intensity * ambientLight + intensity * (diffuseLight) ;
}